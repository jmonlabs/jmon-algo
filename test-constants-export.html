<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Test Constants Export</title>
  <style>
    body {
      font-family: 'Monaco', 'Courier New', monospace;
      max-width: 1000px;
      margin: 40px auto;
      padding: 20px;
      background-color: #f5f5f5;
    }
    h1 { color: #333; }
    .test-section {
      background: white;
      padding: 20px;
      margin: 20px 0;
      border-radius: 8px;
      box-shadow: 0 2px 4px rgba(0,0,0,0.1);
    }
    pre {
      background-color: #f4f4f4;
      padding: 15px;
      border-radius: 4px;
      overflow-x: auto;
      font-size: 13px;
    }
    .status {
      padding: 10px;
      margin: 10px 0;
      border-radius: 4px;
      font-weight: bold;
    }
    .success {
      background-color: #d4edda;
      color: #155724;
      border: 1px solid #c3e6cb;
    }
    .error {
      background-color: #f8d7da;
      color: #721c24;
      border: 1px solid #f5c6cb;
    }
  </style>
</head>
<body>
  <h1>Constants Export Test</h1>

  <div class="test-section">
    <h2>Test 1: Access ARTICULATION_TYPES</h2>
    <div id="test1-status"></div>
    <pre id="test1-result"></pre>
  </div>

  <div class="test-section">
    <h2>Test 2: Access ORNAMENT_TYPES</h2>
    <div id="test2-status"></div>
    <pre id="test2-result"></pre>
  </div>

  <div class="test-section">
    <h2>Test 3: Access MusicTheoryConstants</h2>
    <div id="test3-status"></div>
    <pre id="test3-result"></pre>
  </div>

  <div class="test-section">
    <h2>Test 4: Verify all constants exist</h2>
    <div id="test4-status"></div>
    <pre id="test4-result"></pre>
  </div>

  <script type="module">
    import { jm } from './dist/jmon.esm.js';

    console.log('jm object:', jm);
    console.log('jm.constants:', jm.constants);

    // Test 1: ARTICULATION_TYPES
    try {
      const articulationTypes = jm.constants.articulations;

      if (!articulationTypes) {
        throw new Error('jm.constants.articulations is undefined');
      }

      const articulationCount = Object.keys(articulationTypes).length;
      document.getElementById('test1-status').innerHTML =
        `<div class="status success">✓ ARTICULATION_TYPES accessible (${articulationCount} types)</div>`;
      document.getElementById('test1-result').textContent =
        JSON.stringify(articulationTypes, null, 2);
    } catch (error) {
      document.getElementById('test1-status').innerHTML =
        `<div class="status error">✗ Error: ${error.message}</div>`;
      console.error('Test 1 error:', error);
    }

    // Test 2: ORNAMENT_TYPES
    try {
      const ornamentTypes = jm.constants.ornaments;

      if (!ornamentTypes) {
        throw new Error('jm.constants.ornaments is undefined');
      }

      const ornamentCount = Object.keys(ornamentTypes).length;
      document.getElementById('test2-status').innerHTML =
        `<div class="status success">✓ ORNAMENT_TYPES accessible (${ornamentCount} types)</div>`;
      document.getElementById('test2-result').textContent =
        JSON.stringify(ornamentTypes, null, 2);
    } catch (error) {
      document.getElementById('test2-status').innerHTML =
        `<div class="status error">✗ Error: ${error.message}</div>`;
      console.error('Test 2 error:', error);
    }

    // Test 3: MusicTheoryConstants
    try {
      const theoryConstants = jm.constants.theory;

      if (!theoryConstants) {
        throw new Error('jm.constants.theory is undefined');
      }

      const scales = Object.keys(theoryConstants.scale_intervals || {}).length;
      document.getElementById('test3-status').innerHTML =
        `<div class="status success">✓ MusicTheoryConstants accessible (${scales} scales)</div>`;

      // Show a subset of the constants
      const subset = {
        chromatic_scale: theoryConstants.chromatic_scale,
        scale_intervals: Object.keys(theoryConstants.scale_intervals || {}),
        intervals: theoryConstants.intervals
      };

      document.getElementById('test3-result').textContent =
        JSON.stringify(subset, null, 2);
    } catch (error) {
      document.getElementById('test3-status').innerHTML =
        `<div class="status error">✗ Error: ${error.message}</div>`;
      console.error('Test 3 error:', error);
    }

    // Test 4: Verify all three exist
    try {
      const hasArticulations = !!jm.constants.articulations;
      const hasOrnaments = !!jm.constants.ornaments;
      const hasTheory = !!jm.constants.theory;

      if (hasArticulations && hasOrnaments && hasTheory) {
        document.getElementById('test4-status').innerHTML =
          '<div class="status success">✓ All constants are accessible via jm.constants</div>';

        const summary = {
          'jm.constants.articulations': Object.keys(jm.constants.articulations),
          'jm.constants.ornaments': Object.keys(jm.constants.ornaments),
          'jm.constants.theory': 'MusicTheoryConstants class'
        };

        document.getElementById('test4-result').textContent =
          JSON.stringify(summary, null, 2);
      } else {
        throw new Error('Not all constants are accessible');
      }
    } catch (error) {
      document.getElementById('test4-status').innerHTML =
        `<div class="status error">✗ Error: ${error.message}</div>`;
      console.error('Test 4 error:', error);
    }
  </script>
</body>
</html>
