<!doctype html>
<notebook>
  <title>1. Getting Started</title>

  <script type="text/markdown">
# 1. Getting Started

Welcome to jmon/algo! This tutorial introduces the basics of the JMON (JavaScript Music Object Notation) format and the algo toolkit for algorithmic music composition.

In this chapter, you'll learn:
- JMON format basics (notes, tracks, compositions)
- Note structure: `{pitch, duration, time, velocity}`
- Creating simple melodies
- Format conversion capabilities
- Overview of algo's key features
  </script>

  <script type="module" pinned>
import jm from "../src/index.js";
import * as Tone from "npm:tone";
import * as ABCJS from "npm:abcjs";
  </script>

  <script type="text/markdown">
## 1. JMON Format Basics

In algo, music is represented in JMON format:
- A **note** is an object: `{pitch, duration, time, velocity}`
- A **track** is an array of notes
- A **composition** is an object with a tracks array

### Note structure

Each note has four key properties:

```js
{
  pitch: 60,        // MIDI pitch (60 = C4)
  duration: 1,      // Duration in quarter notes
  time: 0,          // Start time in quarter notes
  velocity: 0.8     // Volume (0-1)
}
```

A rest is represented with `pitch: null`.
  </script>

  <script type="module" pinned>
// Single note (C4, quarter note, starting at beat 0)
const note = { pitch: 60, duration: 1, time: 0, velocity: 0.8 };
display(note);
  </script>

  <script type="text/markdown">
### Tracks

A track is simply an array of notes:
  </script>

  <script type="module" pinned>
// A track is an array of notes
const track = [
  { pitch: 60, duration: 1, time: 0, velocity: 0.8 },   // C
  { pitch: 62, duration: 1, time: 1, velocity: 0.8 },   // D
  { pitch: 64, duration: 1, time: 2, velocity: 0.8 },   // E
  { pitch: 65, duration: 1, time: 3, velocity: 0.8 }    // F
];
display(track);
  </script>

  <script type="text/markdown">
### Compositions

A composition combines multiple tracks with metadata:
  </script>

  <script type="module" pinned>
// A composition has multiple tracks
const composition = {
  format: 'jmon',
  version: '1.0',
  tempo: 120,
  tracks: [
    {
      label: 'Melody',
      notes: [
        { pitch: 60, duration: 1, time: 0, velocity: 0.8 },
        { pitch: 62, duration: 1, time: 1, velocity: 0.8 },
        { pitch: 64, duration: 1, time: 2, velocity: 0.8 },
        { pitch: 65, duration: 1, time: 3, velocity: 0.8 }
      ]
    },
    {
      label: 'Bass',
      notes: [
        { pitch: 48, duration: 1, time: 0, velocity: 0.7 },
        { pitch: 50, duration: 1, time: 1, velocity: 0.7 },
        { pitch: 52, duration: 1, time: 2, velocity: 0.7 },
        { pitch: 53, duration: 1, time: 3, velocity: 0.7 }
      ]
    }
  ]
};
display(composition);
  </script>

  <script type="text/markdown">
## 2. Creating Music with algo

Let's create "Twinkle Twinkle Little Star" in C major to demonstrate how to work with JMON format.
  </script>

  <script type="module" pinned>
// "Twinkle Twinkle Little Star" - first phrase
const twinkle1 = [
  { pitch: 60, duration: 1, time: 0, velocity: 0.8 },   // C (twin)
  { pitch: 60, duration: 1, time: 1, velocity: 0.8 },   // C (kle)
  { pitch: 67, duration: 1, time: 2, velocity: 0.8 },   // G (twin)
  { pitch: 67, duration: 1, time: 3, velocity: 0.8 },   // G (kle)
  { pitch: 69, duration: 1, time: 4, velocity: 0.8 },   // A (lit)
  { pitch: 69, duration: 1, time: 5, velocity: 0.8 },   // A (tle)
  { pitch: 67, duration: 2, time: 6, velocity: 0.8 }    // G (star)
];

// Second phrase
const twinkle2 = [
  { pitch: 65, duration: 1, time: 8, velocity: 0.8 },   // F (how)
  { pitch: 65, duration: 1, time: 9, velocity: 0.8 },   // F (I)
  { pitch: 64, duration: 1, time: 10, velocity: 0.8 },  // E (won)
  { pitch: 64, duration: 1, time: 11, velocity: 0.8 },  // E (der)
  { pitch: 62, duration: 1, time: 12, velocity: 0.8 },  // D (what)
  { pitch: 62, duration: 1, time: 13, velocity: 0.8 },  // D (you)
  { pitch: 60, duration: 2, time: 14, velocity: 0.8 }   // C (are)
];

// Merge tracks horizontally (in time)
const twinkle = [...twinkle1, ...twinkle2];
display(`Twinkle Twinkle has ${twinkle.length} notes`);
  </script>

  <script type="text/markdown">
Let's visualize and play the melody:
  </script>

  <script type="module" pinned>
const twinkleComposition = {
  title: 'Twinkle Twinkle Little Star',
  tempo: 120,
  tracks: [{
    label: 'Melody',
    notes: twinkle
  }]
};

display(jm.score(twinkleComposition, { ABCJS }));
display(await jm.play(twinkleComposition, { Tone }));
  </script>

  <script type="text/markdown">
## 3. Format Conversion

algo can convert JMON to various formats:
- **MIDI files** - Standard MIDI file format
- **VexFlow** - Music notation rendering
- **Tone.js** - Web audio playback
- **WAV audio** - Audio file generation
- **SuperCollider** - Live coding environment
- **ABC notation** - Text-based music notation

### Converting to MIDI

Here's an example of converting to MIDI format:
  </script>

  <script type="module">
// Convert to MIDI
const midi = jm.converters.MIDI.fromJmon(twinkleComposition);
display("âœ“ Converted to MIDI format");
display(midi);
  </script>

  <script type="text/markdown">
## 4. Key algo Features

algo offers a comprehensive toolkit for algorithmic music composition:

### Music Theory (`jm.theory.*`)
- Scales, chord progressions, voice leading
- Ornaments and articulations
- Rhythm generation (isorhythm, beatcycle)

### Generative Algorithms (`jm.generative.*`)
- **Minimalism**: Process-based composition (additive/subtractive processes, tintinnabuli)
- **Cellular Automata**: Rule-based pattern generation
- **Fractals**: Self-similar musical structures
- **Random Walks**: Markov chains and stochastic processes
- **Genetic Algorithms**: Evolutionary music generation
- **Gaussian Processes**: Smooth, controlled randomness

### Analysis (`jm.analysis.*`)
- 11+ musical metrics
- Gini coefficient, syncopation, contour entropy
- Statistical analysis of musical patterns

### Conversion (`jm.converters.*`)
- MIDI, VexFlow, Tone.js, WAV, SuperCollider, ABC notation

### Visualization
- Plotly-based visualizations
- Score rendering
- Algorithm visualizations

Let's explore what modules are available:
  </script>

  <script type="module">
display({
  "Theory modules": Object.keys(jm.theory),
  "Generative modules": Object.keys(jm.generative),
  "Converters": Object.keys(jm.converters)
});
  </script>

  <script type="text/markdown">
## 5. Next Steps

You're now ready to dive deeper into algo! Continue with the following tutorials:

- **Chapter 2: Harmony** - Scales, chords, voice leading, ornaments
- **Chapter 3: Loops** - Polyloops and rhythmic patterns
- **Chapter 4: Minimalism** - Additive/subtractive processes, tintinnabuli
- **Chapter 5: Walks** - Random walks and Gaussian processes
- **Chapter 6: Fractals** - Cellular automata and fractal patterns
- **Chapter 7: Genetic Algorithms** - Evolutionary music generation

Happy composing! ðŸŽµ
  </script>

</notebook>
